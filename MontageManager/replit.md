# نظام حاسبة تكاليف المونتاج الاحترافي

## نظرة عامة
نظام متكامل لحساب تكاليف مونتاج الفيديوهات باللغة العربية مع لوحة تحكم مسؤول كاملة.

## آخر التحديثات
**تاريخ:** 25 أكتوبر 2025

### التحديثات الرئيسية:
- ✅ نقل بيانات المسؤول الافتراضي (admin/admin123) من الكود إلى قاعدة البيانات
- ✅ إضافة نافذة ترحيب منبثقة جذابة (مدة ثانية واحدة) في صفحة العرض
- ✅ إزالة عرض بيانات الحساب الافتراضي من صفحة تسجيل الدخول
- ✅ تحسين لوحة التحكم بـ JavaScript كامل لجميع عمليات CRUD
- ✅ استخدام SESSION_SECRET من environment variables بدلاً من hardcoded value

## هيكل المشروع

```
.
├── app.py                          # تطبيق Flask الرئيسي
├── requirements.txt                # المكتبات المطلوبة
├── .gitignore                      # ملف تجاهل Git
├── video_montage_system.db         # قاعدة بيانات SQLite (تُنشأ تلقائياً)
└── templates/
    ├── display.html                # صفحة العرض العامة (مع نافذة ترحيب)
    ├── admin_login.html            # صفحة تسجيل دخول المسؤول
    └── admin_dashboard.html        # لوحة تحكم المسؤول
```

## الميزات الرئيسية

### 1. أنواع الفيديوهات الثلاثة
- **🎥 يوتيوب + ريلات مقسمة:** فيديو يوتيوب مع ريلات متعددة منفصلة
- **📹 يوتيوب فقط:** فيديو يوتيوب عادي بدون ريلات
- **📱 ريل منفصل:** ريل مستقل بسعر ثابت

### 2. منطق التقريب المخصص
نظام تقريب خاص لأقرب نصف دولار ($0.5):
- **< 0.25:** التقريب للأسفل إلى الرقم الصحيح
- **0.25 - 0.74:** التقريب إلى النصف (0.5)
- **≥ 0.75:** التقريب للأعلى إلى الرقم الصحيح التالي

### 3. الأسعار الافتراضية
- سعر الدقيقة: **$3.5** (قابل للتعديل لكل فيديو)
- سعر الريل المقسم: **$2.5** (ثابت)
- سعر الريل المنفصل: **$5.0** (ثابت)

### 4. الحسابات
#### يوتيوب + ريلات:
```
السعر = ((دقائق + (ثواني ÷ 60)) × سعر_الدقيقة) + (عدد_الريلات × 2.5)
```

#### يوتيوب فقط:
```
السعر = (دقائق + (ثواني ÷ 60)) × سعر_الدقيقة
```

#### ريل منفصل:
```
السعر = 5.00 $ (ثابت)
```

## لوحة تحكم المسؤول

### الوصول:
- **الرابط:** `/admin/login`
- **الحساب الافتراضي:**
  - اسم المستخدم: `admin`
  - كلمة المرور: `admin123`
  - ⚠️ **تحذير:** يُرجى تغيير بيانات الحساب بعد أول تسجيل دخول

### الوظائف المتاحة:
- ✅ إضافة فيديوهات جديدة
- ✅ تعديل فيديوهات موجودة
- ✅ حذف فيديوهات
- ✅ إدارة الريلات المقسمة (إضافة/تعديل/حذف)
- ✅ عرض الإجمالي الكلي التلقائي
- ✅ معاينة الصفحة العامة

## الأمان

### البيانات السرية:
- استخدام `SESSION_SECRET` من environment variables
- تشفير كلمات المرور باستخدام `werkzeug.security`
- حماية جميع صفحات المسؤول بجلسات آمنة

### قاعدة البيانات:
- حساب المسؤول مخزن في قاعدة البيانات (ليس في الكود)
- استخدام SQLAlchemy ORM للأمان
- تهيئة تلقائية عند أول تشغيل

## التشغيل

### متطلبات النظام:
- Python 3.11+
- Flask 3.0.0
- Flask-SQLAlchemy 3.1.1
- SQLAlchemy 2.0.23
- Werkzeug 3.0.1

### التثبيت والتشغيل:
```bash
# تثبيت المكتبات (تم بالفعل)
pip install -r requirements.txt

# تشغيل التطبيق (يعمل تلقائياً)
python app.py
```

### الوصول:
- **الصفحة الرئيسية:** http://localhost:5000/
- **صفحة العرض:** http://localhost:5000/display
- **لوحة المسؤول:** http://localhost:5000/admin/login

## التقنيات المستخدمة

- **Backend:** Flask (Python)
- **Database:** SQLite + SQLAlchemy ORM
- **Frontend:** HTML5 + Tailwind CSS + Vanilla JavaScript
- **الخطوط:** Cairo (Google Fonts) - خط عربي احترافي
- **الأمان:** Werkzeug Password Hashing
- **التوجيه:** RTL (من اليمين لليسار)

## ملاحظات مهمة

1. **نافذة الترحيب:** تظهر تلقائياً لمدة ثانية واحدة عند فتح الصفحة الرئيسية
2. **التقريب:** يتم تقريب كل فيديو على حدة قبل الجمع
3. **الريلات المقسمة:** سعر ثابت $2.5 لكل ريل
4. **قاعدة البيانات:** تُنشأ تلقائياً مع بيانات تجريبية عند أول تشغيل
5. **Tailwind CDN:** مستخدم للتطوير فقط - للإنتاج يُنصح بتثبيت Tailwind CLI

## الإصدار الحالي
**v1.0** - نظام متكامل وجاهز للاستخدام

## المطور
تم التطوير بعناية لضمان دقة الحسابات والشفافية الكاملة © 2025
